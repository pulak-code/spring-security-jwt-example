# Test configuration for integration tests

# JWT Configuration
jwt.secret=testsecretkeyforintegrationsuitedontuseinproduction
jwt.expiration=3600000
jwt.refreshExpiration=86400000
jwt.issuer=ecommerce-test
jwt.cookie.name=refreshToken
jwt.header.name=Authorization
jwt.token.prefix=Bearer
jwt.token.storage=MEMORY

# Server Configuration - use random port to avoid conflicts
server.port=0
server.servlet.context-path=/

# Performance optimization for tests
spring.main.lazy-initialization=true
spring.jmx.enabled=false

# Task executor configuration
spring.task.execution.pool.core-size=2
spring.task.execution.pool.max-size=4
spring.task.execution.pool.queue-capacity=100
spring.task.execution.thread-name-prefix=test-task-

# Memory settings to avoid OOM issues
spring.jpa.properties.hibernate.generate_statistics=false

# MongoDB for tests - use embedded MongoDB
spring.mongodb.embedded.version=4.0.21
spring.data.mongodb.uri=mongodb://localhost:27017/ecommerce_test_${random.uuid}
spring.data.mongodb.auto-index-creation=true
# Disable MongoDB's strict query execution to handle null values better
spring.data.mongodb.field-naming-strategy=org.springframework.data.mapping.model.SnakeCaseFieldNamingStrategy

# Disable unnecessary features for tests
spring.jackson.serialization.indent-output=false
spring.thymeleaf.cache=false
springdoc.api-docs.enabled=false
springdoc.swagger-ui.enabled=false

# Logging Configuration - reduce verbosity
logging.level.root=WARN
logging.level.genaidemopoc.ecommerceproj1a=INFO
logging.level.org.springframework.security=WARN
logging.level.org.springframework.web=WARN
logging.level.org.springframework.data.mongodb=WARN
logging.level.org.mongodb=WARN

# Security settings
spring.security.user.name=testuser
spring.security.user.password=testpassword

# Disable auto-restart
spring.devtools.restart.enabled=false

# Disable cache to improve test stability
spring.cache.type=NONE

# Reduce connection pool sizes
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.maximum-pool-size=2 